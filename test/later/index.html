<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Test template for Production Model Package">
    <meta name="author" content="Lik Eduard">
    <link rel="stylesheet" href="style.css">
    <title>Testing</title>
</head>

<body>
    <div class="wrapper">
        <div class="container">

            <div class="panel top">
                <div class="block rules">
                    <h2 class="block-name">Rules</h2>
                    <div class="items" id="rules"></div>
                </div>
                <div class="block memory">
                    <h2 class="block-name">Memory</h2>
                    <div class="items" id="memory"></div>
                </div>
            </div>

            <div class="panel bottom">
                <div class="block buttons">
                    <a class="button solve" id="solve">Solve</a>
                    <!-- <a class="button reset" id="reset">Reset</a> -->
                </div>
            </div>

        </div>
    </div>
</body>
<script src="../lib/production-model.min.js"></script>
<script>
// let pm = new ProductionModel()

// pm.registerActions([
//     "работать военным",
//     "иметь большую зарплату",
//     "много программировать",
//     "числиться в элитных войсках",
//     "получить дом бесплатно",
//     "мама будет счастлива",
//     "остаться целым и невредимым"
// ])

// pm.setState((If, action) => {
//     If("работать военным").then("иметь большую зарплату")
//     If("работать военным", "много программировать").then("числиться в элитных войсках"),
//     If("получить дом бесплатно").then("остаться целым и невредимым"),
//     If("числиться в элитных войсках").then("получить дом бесплатно"),
//     If("остаться целым и невредимым").then("мама будет счастлива"),
//     If("иметь большую зарплату").then("много программировать")
//     return ["работать военным"]
// })

// let solver = pm.getSolverHTML({
//     rules: "rules",
//     memory: "memory",
//     iterations: "",
//     head: ""
// })

// document.getElementById('solve').addEventListener("click", () => {
//     solver.solve()
// })

let pm = new ProductionModel('en')

pm.registerActions([
    "работать военным",
    "иметь большую зарплату",
    "много программировать",
    "числиться в элитных войсках",
    "получить дом бесплатно",
    "мама будет счастлива",
    "остаться целым и невредимым",
    "стрелять из автомата",
    "выполнять приказы",
    "родные будут рады",
    "стать дисциплинированным",
    "получить травмы фаланг",
    "получить хорошие навыки стрельбы"
])

pm.setState((If) => {
    If("работать военным").then("иметь большую зарплату")
    If("работать военным", "много программировать").then("числиться в элитных войсках")
    If("получить дом бесплатно").then("остаться целым и невредимым", "мама будет счастлива")
    If("числиться в элитных войсках").then("получить дом бесплатно")
    If("остаться целым и невредимым").then("мама будет счастлива")
    If("иметь большую зарплату").then("много программировать")
    If("числиться в элитных войсках").then("стать дисциплинированным")
    If("стрелять из автомата").then("получить травмы фаланг")
    If("остаться целым и невредимым").then("родные будут рады")
    If("родные будут рады").then("остаться целым и невредимым")
    If("стрелять из автомата").then("получить хорошие навыки стрельбы")
    If("получить травмы фаланг").then("остаться целым и невредимым")

    //return ["родные будут рады"]
    //return ["работать военным"]
    //return ["работать военным", "получить травмы фаланг"]
    return ["работать военным", "получить травмы фаланг", "стрелять из автомата"]
})

let solver = pm.getSolverHtml({
    rules: "rules",
    memory: "memory",
    speed: 1,
    onSuccess: () => {
        console.log('Zalupa')
    }
})

document.getElementById('solve').addEventListener("click", () => {
    solver.solve()
})

</script>
</html>